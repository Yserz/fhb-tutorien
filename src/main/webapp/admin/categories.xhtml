<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:wlc="http://xmlns.jcp.org/jsf/composite/wlc">
  <h:body>    
    <!-- TODO: Can we make this generic? With a composite component or sth. similar? -->
    <ui:composition template="/WEB-INF/backend/xhtml/main.xhtml">
      <ui:define name="content">        
        <!-- Form -->
        <form class="pure-form pure-form-aligned"
              autocomplete="off"
              jsf:id="create-category" 
              jsf:prependId="false"
              >
          <fieldset>
            <div class="pure-control-group">
              <label for="name">Name</label>
              <input 
                id="name" 
                type="text" 
                placeholder="Java" 
                required="required"
                jsf:id="name"
                jsf:value="#{categoryController.item.title}"
                />
            </div>
            <div class="pure-controls">
              <button type="submit" 
                      class="pure-button pure-button-primary"
                      jsf:action="#{categoryController.save}"
                      >Speichern</button>
            </div>
          </fieldset>
        </form>

        <!-- List -->
        <table class="pure-table pure-table-horizontal">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Editieren</th>
              <th>Löschen</th>
            </tr>
          </thead>
          <tbody>
            <ui:repeat value="#{categoryService.categories}" var="category">
              <tr>
                <td>#{category.id}</td>
                <td>#{category.title}</td>
                <td>
                  <h:form>
                    <h:commandLink value="bearbeiten">
                      <f:setPropertyActionListener value="#{category}"
                                                   target="#{categoryController.item}" />
                    </h:commandLink>
                  </h:form>
                </td>
                <td>
                  <h:form>
                    <h:commandLink value="löschen" action="#{categoryController.delete}">
                      <f:setPropertyActionListener value="#{category}"
                                                   target="#{categoryController.item}" />
                    </h:commandLink>
                  </h:form>
                </td>
              </tr>
            </ui:repeat>
          </tbody>
        </table>
      </ui:define>
    </ui:composition>
  </h:body>
</html>