<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
  <h:body>    
    <ui:composition template="/WEB-INF/backend/xhtml/main.xhtml">
      <ui:define name="title">
        <h:outputText value="#{backend['admin.form.title.youtube']}" />
      </ui:define>

      <ui:define name="content">    
        <h2 class="page-header">
          <h:outputText value="#{backend['admin.form.title.youtube']}" />
        </h2>

        <form class="pure-form pure-form-stacked"
              jsf:id="create-author" 
              jsf:prependId="false"
              >
          <fieldset>
            <div class="pure-control-group">
              <label for="playlistId">Playlist ID</label>
              <h:inputText
                p:placeholder="PLF544CEEC9432BF67"
                p:required="required"
                p:value="PLF544CEEC9432BF67"
                id="playlistId"
                value="#{youTubeImportController.playlistId}"
                >
              </h:inputText>
            </div>
          </fieldset>

          <fieldset>
            <div class="pure-controls">                            
              <h:commandButton 
                value="Einlesen" 
                styleClass="pure-button pure-button-primary"
                onclick="youTubeImporter.startPreLoader();"
                >
                <f:ajax 
                  listener="#{youTubeImportController.parsePlaylist}"
                  execute="@form" 
                  render=":playlistDetails" 
                  />
              </h:commandButton>
            </div>
          </fieldset>
        </form>

        <h:panelGroup id="playlistDetails" layout="block">          
          <h:panelGroup rendered="true">
            <h2 class="page-header">Details</h2>
            <h2>
              <h:outputText value="#{youTubeImportController.playlist.snippet.title}" />
            </h2>	
            <p>
              <h:graphicImage 
                id="playlistPreloader"
                width="64"
                height="64"
                style="display: none;"
                rendered="#{empty youTubeImportController.playlist}"
                value="/resources/images/preloader/flat/64_64/cube.gif" 
                />
              <h:outputText value="#{youTubeImportController.playlist.snippet.description}" />
            </p>
            <h:form>
              <h:commandButton 
                action="#{youTubeImportController.savePlaylist}"
                value="In Datenbank Ã¼bernehmen" 
                styleClass="pure-button pure-button-primary">
              </h:commandButton>
            </h:form>
          </h:panelGroup>
        </h:panelGroup>
        <script>
          //<![CDATA[ 
          $(document).ready(function() {
            window.youTubeImporter = {
              startPreLoader: function() {
                $('#playlistPreloader').toggleClass('block');
              }
            };
          });
          //]]>
        </script>
      </ui:define>
    </ui:composition>
  </h:body>
</html>