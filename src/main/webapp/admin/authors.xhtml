<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:wlc="http://xmlns.jcp.org/jsf/composite/wlc">
  <h:body>    
    <ui:composition template="/WEB-INF/backend/xhtml/main.xhtml">
      <ui:define name="content">        
        <!-- Form -->
        <form class="pure-form pure-form-aligned"
              autocomplete="off"
              jsf:id="create-author" 
              jsf:prependId="false"
              >
          <fieldset>
            <div class="pure-control-group">
              <label for="name">Name</label>
              <input 
                id="name" 
                type="text" 
                placeholder="Konrad Zuse" 
                required="required"
                jsf:id="name"
                jsf:value="#{authorController.item.name}"
                />
            </div>

            <div class="pure-controls">
              <button type="submit" 
                      class="pure-button pure-button-primary"
                      jsf:action="#{authorController.edit}"
                      >Speichern</button>
            </div>
          </fieldset>
        </form>

        <!-- Overview -->
        <p>Autoren in Datenbank: #{authorController.authorCount}</p>
        <p>
          Aktuelle Seite: <h:outputText value="#{authorService.currentPage}" />
        </p>

        <!-- List -->
        <wlc:admin-item-table controller="#{authorController}" /> 

        <div id="pagination-holder"></div>

        <!-- http://flaviusmatis.github.io/simplePagination.js/ -->
        <script>
          //<![CDATA[ 
          $(function() {
            $('#pagination-holder').pagination({
              currentPage: #{authorService.currentPage},
              items: 200,
              itemsOnPage: 20,
              cssStyle: 'light-theme',
              onPageClick: function(pageNumber, event) {
                var offset = (pageNumber - 1) *#{authorService.amount};
                window.location.href = window.location.pathname += '?offset=' + offset;
              }
            });
          });
          //]]>
        </script>

      </ui:define>
    </ui:composition>
  </h:body>
</html>